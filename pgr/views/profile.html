<section class="promain">
	<div class="pmain pro">
		<input 
			class="hidden" 
			type="file"  
			name="photo" 
			ng-model="newImage"
			onchange="angular.element(this).scope().onReadFile()" 
			id="photo" 
			accept="image/jpeg,image/png,image/gif" />
		<span ng-switch on="isImage" >
	      <span ng-switch-when="false">
	        	<img class="pp" ng-click="onUpdateFile()" src="../images/use.png" />
	      </span>
	      <span ng-switch-default>
	        	<img class="pp" ng-click="onUpdateFile()" src="{{user.picture_url}}" />
	      </span>
	   </span>		
		<div class="pmpar">
			<p>
				<label for="name_i">{{'_NameL_' | i18n}}:</label> 
				<input 
					type="text" 
					id="name_i" 
					ui-keypress="{13:'onEditSave($event)'}" 
					ng-onkeyup="onEditKeyUp()" 
					class="clean form-control" 
					disabled="disabled" 
					ng-model="user.name"
					placeholder="Batman"
					required
					ng-minlength="6" />
				<img src="../images/pencil.png" ng-click="onEditActivate($event, 'name_i')" />
			</p>
			<p>
				<label for="email_i">E-mail:</label> 
				<input 
					type="email" 
					id="email_i" 
					ui-keypress="{13:'onEditSave($event)'}" 
					class="clean form-control" 
					disabled="disabled" 
					ng-model="user.email"
					placeholder="dccomics.com/batman" /> 
				<img src="../images/pencil.png"  ng-click="onEditActivate($event, 'email_i')">
			</p>
			<p>
				<label for="age_i">{{'_AgeL_' | i18n}}:</label>
				<select ng-options="item.age.name for item in ages" ng-model="ages" disabled="disabled" id="age_i">
					<option value="">00</option>
				</select>
				<img src="../images/pencil.png" ng-click="onEditActivate($event, 'age_i')">
			</p>
			<p>
				<label for="loc_i">{{'_LocL_' | i18n}}:</label>
				<select ng-options="item.state.name for item in states" ng-model="states" disabled="disabled" id="loc_i">
					<option value="">Gotham City</option>
				</select>
				<img src="../images/pencil.png" ng-click="onEditActivate($event, 'loc_i')"></p>
			<p>
				<label for="email_i">{{'_ProfL_' | i18n}}:</label>
				<select ng-options="item.profession.name for item in professions" ng-model="professions" disabled="disabled" id="pro_i">
					<option value="">Superhero</option>
				</select>
				<img src="../images/pencil.png" ng-click="onEditActivate($event, 'pro_i')">
			</p>
		</div>
		<div class="publish">
			<p><button ng-click="onPublish()">{{'_PublishL_' | i18n}}</button></p>
		</div>
	</div>
	<div class="pmain league">
		<img src="../images/league.png">
		<i>{{user.points}} <b>{{'_PointsL_' | i18n}}</b></i>
		<sub></sub>
	</div>
	<div class="pmain achiev">
		<h3>{{'_AchievL_' | i18n}}</h3>
		<strong><img src="../images/ach.png"></strong>
		<strong><img src="../images/ach.png"></strong>
		<strong><img src="../images/ach.png"></strong>
		<strong><img src="../images/ach.png"></strong>
		<strong><img src="../images/ach.png"></strong>
	</div>
</section>

<section class="procrit" ng-controller="CriteriaController">
	<ul> 
		<li ng-repeat="(key,item) in needs | orderBy:'need.position'">
			<div class="cr" ng-click="onShowGoals($event)">
				<p>{{item.need.name}}</p>
				<strong>
					<b>{{item.current_value}} / {{item.need.values_sum}}</b>
					<span class="current_position" style="width: {{(item.current_value / (item.need.values_sum ))*100}}%;"></span>
				</strong>
			</div>
			<ul>
				<li ng-repeat="(subKey,subItem) in item.need.goals| orderBy:'goal.position'" >
					<span><img src="../images/point.png"></span>
					<a ng-click="open('{{subItem.goal.sguid}}', $event, '{{item.need.sguid}}', subItem)">{{subItem.goal.name}}</a>					
					<strong>
						<b>{{subItem.current_value}} / {{subItem.goal.values_sum}}</b>
						<span class="current_position" style="width: {{(subItem.current_value / (subItem.goal.values_sum ))*100}}%;"></span>
					</strong>
					<div class="criterion">
						<ul>
							<li ng-repeat="crItem in subItem.goal.criteriums | orderBy:'criterium.position'" >
								<p>{{crItem.criterium.name}}</p>
								<ul class="crp">
									<li ng-click="onCliteriaSelect(value.criteria_value, crItem.criterium, $event)" ng-repeat="value in crItem.criterium.criteria_values | orderBy:'value.criteria_value.position'"  class="{{value.user_criteria}}">
										{{value.criteria_value.name}}
									</li>
								</ul>
							</li>
						</ul>
					</div>
				</li>
				
			</ul>
		</li>
	</ul>
	
</section>

<section class="pronear">
	<a href="#"><span></span></a>
	<div class="ph">
		<a href="#"><img src="../images/1.png"></a>
		<a href="#"><img src="../images/2.png"></a>
		<a href="#"><img src="../images/use.png"></a>
		<a href="#"><img src="../images/4.png"></a>
		<a href="#"><img src="../images/5.png"></a>
	</div>
	<a href="#"><span></span></a>
</section>
