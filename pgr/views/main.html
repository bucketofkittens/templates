<a ng-click="onState()" class="viewch">{{stateText}}</a>

<div class="lnbl" ng-include src="'partials/follow.html'" ng-controller="FollowController" ng-init="onMove=true; onClickCompare=false; onTips=true; onRelative=false;" ></div>

<section id="main_leagues" ng-class="{tags: !state}">
	

	<ul>
		<li 
			x-lvl-draggable="true"
			x-lvl-drop-target="true" 
			paralax-enable="{{!state}}"
			null-image="{{userItem.name}}"
			paralax-image 
			id="{{userItem.sguid}}"
			ng-repeat="userItem in viewedUsers"
			ng-class="{showMenu: userItem.showMenu}"
			class="league_{{userItem.league.name}}">
			<a ng-if="userItem && userItem.name" ng-click="onUserTouch(userItem)" ng-mouseleave="onMouseLeaveUser(userItem)" ng-mouseenter="onMouseEnterUser(userItem)" >
				<img class="repeat-item" ng-src="{{userItem.avatar}}" alt="" err-src="/images/unknown-person.png" />
				<span>{{userItem.points}}</span>
				<i></i>
				<div class="fallout" ng-class="{show: userItem.showMenu}">
					<b>{{userItem.name}}<br />{{userItem.profession.name}}</b>
					<b ng-click="onMoveToUser(userItem)">View</b>
					<b ng-if="rootUser" ng-click="onCompareToUser(userItem)">Compare</b>
					<b ng-click="onFollow($event, userItem)" ng-if="rootUser && !userItem.isFrend">Follow</b>
					<b ng-click="onUnFollow($event, userItem)" ng-if="rootUser && userItem.isFrend">Unfollow</b>
				</div>
			</a>
		</li>
	</ul>
</section>

<div ng-controller="RegController">
	<div modal="shouldBeOpen" close="close()" options="opts">
		<div class="modal-body">
			<h4>{{'_RegL_' | i18n}}</h4>
			<form name="form" novalidate class="css-form myForm" >
				<p>
					<label for="login_i">{{'_LoginL_' | i18n}}:</label> 
					<input 
						type="text" 
						id="login_i" 
						class="form-control"
						ng-model="user.login" required ng-minlength="6" />
				</p>
				<p>
					<label for="email_i">E-mail:</label> 
					<input 
						type="email" 
						id="email_i" 
						class="form-control"
						ng-model="user.email" required  /> 
				</p>
				<p>
					<label for="Name_i">{{'_NameL_' | i18n}}:</label> 
					<input 
						type="text" 
						id="name_i" 
						class="form-control"
						ng-model="user.name" required ng-minlength="6" /> 
				</p>
				<p>
					<label for="pass_i">{{'_PasswordL_' | i18n}}:</label> 
					<input 
						type="password" 
						id="pass_i"
						name="password"
						class="form-control"
						ng-model="user.password" 
						required 
						ng-minlength="6" /> 
				</p>
				<p>
					<label for="repass_i">{{'_RepeatL_' | i18n}} {{'_PasswordL_' | i18n}}:</label> 
					<input 
						type="password" 
						id="repass_i" 
						class="form-control"
						ng-model="user.repassword" 
						required 
						ng-minlength="6"  
						same-as="user"
						/> 
				</p>
				<p id="errors">{{errors}}</p>
			</form>
		</div>
		<div class="modal-footer">
			<button class="btn btn-success" ng-click="addUser()" ng-disabled="form.$invalid || isUnchanged(user)">Ok</button>
		   	<button class="btn btn-danger cancel" ng-click="close()">Cancel</button>
		</div>
	</div>
</div>
<div ng-controller="LoginController">
	<div modal="shouldBeOpen" close="close()" options="opts">
		<div class="modal-body">
			<h4>{{'_Auth_' | i18n}}</h4>
			<form id="login_form" name="form" novalidate class="css-form myForm"  ui-keypress="{13:'onSubmit($event)'}">
				<p>
					<label for="login_i">{{'_LoginL_' | i18n}}:</label> 
					<input 
						type="text" 
						id="login_i" 
						class="form-control"
						ng-model="login" required ng-minlength="6" />
				</p>
				<p>
					<label for="pass_i">{{'_PasswordL_' | i18n}}:</label> 
					<input 
						type="password" 
						id="pass_i"
						name="password"
						class="form-control"
						ng-model="password" 
						required 
						ng-minlength="6" /> 
				</p>
				<p><a ng-click="regiostrationOpen()">Registration</a></p>
				<p><a ng-click="socialFacebookLogin()">Facebook</a></p>
				<p><a ng-click="socialGooglePlusLogin()">Google Plus</a></p>
				
				<p id="errors">{{error}}</p>
			</form>
		</div>
		<div class="modal-footer">
			<button class="btn btn-success" ng-click="onSingin()" ng-disabled="form.$invalid || isUnchanged(user)">Ok</button>
		   	<button class="btn btn-danger cancel" ng-click="close()">Cancel</button>
		</div>
	</div>
</div>
<!--
<a class="scroll" href="#">{{'_ScrollL_' | i18n}}</a>
-->