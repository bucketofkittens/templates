<a ng-click="onState()" class="viewch">{{stateText}}</a>
<g+signin clientid="339940198985" style="display: none;"></g+signin>

<div class="lnbl" ng-include src="'partials/follow.html'" ng-controller="FollowController" ng-init="onMove=true; onClickCompare=false; onTips=true; onRelative=false;" ></div>

<section id="main_leagues" ng-class="{tags: !state}">
	<a ng-if="!rootUser" ng-click="onOpenLogin()" class="who" >
		<img ng-src="/images/unknown-person.png" alt="" />
	</a>
	<a ng-if="rootUser" x-lvl-drop-target="true" id="{{rootUser.sguid}}" href="#/profile/{{rootUser.sguid}}" class="who">
		<img ng-src="{{rootUser.avatar}}" err-src="/images/unknown-person.png" />
	</a>

	<ul>
		<li 
			x-lvl-draggable="true"
			x-lvl-drop-target="true" 
			paralax-enable="{{!state}}" 
			paralax-image 
			id="{{userItem.user.sguid}}"
			ng-repeat="userItem in viewedUsers"
			ng-class="{showMenu: userItem.user.showMenu}"
			class="league_{{userItem.user.league.name}}">
			<a ng-if="userItem.user" ng-click="onMoveToUser(userItem)" ng-mouseleave="onMouseLeaveUser(userItem.user)" ng-mouseenter="onMouseEnterUser(userItem.user)" >
				<img class="repeat-item" ng-src="{{userItem.user.avatar}}" alt="" err-src="/images/unknown-person.png" />
				<span>{{userItem.user.points}}</span>
				<sub ng-class="{show: userItem.user.showHint}">{{userItem.user.name}} {{userItem.user.profession.name}}</sub>
				<i></i>
				<div class="fallout" ng-class="{show: userItem.user.showMenu}">
					<b ng-click="onMoveToUser(userItem)">Compare</b>
					<b ng-click="onFollow($event, userItem)" ng-if="rootUser && !userItem.user.isFrend">Follow</b>
					<b ng-click="onUnFollow($event, userItem)" ng-if="rootUser && userItem.user.isFrend">Unfollow</b>
				</div>
			</a>
		</li>
	</ul>
</section>

<div ng-controller="RegController">
	<div modal="shouldBeOpen" close="close()" options="opts">
		<div class="modal-body">
			<h4>{{'_RegL_' | i18n}}</h4>
			<form name="form" novalidate class="css-form myForm" >
				<p>
					<label for="login_i">{{'_LoginL_' | i18n}}:</label> 
					<input 
						type="text" 
						id="login_i" 
						class="form-control"
						ng-model="user.login" required ng-minlength="6" />
				</p>
				<p>
					<label for="email_i">E-mail:</label> 
					<input 
						type="email" 
						id="email_i" 
						class="form-control"
						ng-model="user.email" required  /> 
				</p>
				<p>
					<label for="Name_i">{{'_NameL_' | i18n}}:</label> 
					<input 
						type="text" 
						id="name_i" 
						class="form-control"
						ng-model="user.name" required ng-minlength="6" /> 
				</p>
				<p>
					<label for="pass_i">{{'_PasswordL_' | i18n}}:</label> 
					<input 
						type="password" 
						id="pass_i"
						name="password"
						class="form-control"
						ng-model="user.password" 
						required 
						ng-minlength="6" /> 
				</p>
				<p>
					<label for="repass_i">{{'_RepeatL_' | i18n}} {{'_PasswordL_' | i18n}}:</label> 
					<input 
						type="password" 
						id="repass_i" 
						class="form-control"
						ng-model="user.repassword" 
						required 
						ng-minlength="6"  
						same-as="user"
						/> 
				</p>
				<p id="errors">{{errors}}</p>
			</form>
		</div>
		<div class="modal-footer">
			<button class="btn btn-success" ng-click="addUser()" ng-disabled="form.$invalid || isUnchanged(user)">Ok</button>
		   	<button class="btn btn-danger cancel" ng-click="close()">Cancel</button>
		</div>
	</div>
</div>
<div ng-controller="LoginController">
	<div modal="shouldBeOpen" close="close()" options="opts">
		<div class="modal-body">
			<h4>{{'_Auth_' | i18n}}</h4>
			<form id="login_form" name="form" novalidate class="css-form myForm"  ui-keypress="{13:'onSubmit($event)'}">
				<p>
					<label for="login_i">{{'_LoginL_' | i18n}}:</label> 
					<input 
						type="text" 
						id="login_i" 
						class="form-control"
						ng-model="login" required ng-minlength="6" />
				</p>
				<p>
					<label for="pass_i">{{'_PasswordL_' | i18n}}:</label> 
					<input 
						type="password" 
						id="pass_i"
						name="password"
						class="form-control"
						ng-model="password" 
						required 
						ng-minlength="6" /> 
				</p>
				<p><a ng-click="regiostrationOpen()">Registration</a></p>
				<p><a ng-click="socialLogin()"><img src="/images/fb.jpg" width="200px" alt=""></a></p>
				<p><g+signin clientid="339940198985"></g+signin></p>
				<p id="errors">{{error}}</p>
			</form>
		</div>
		<div class="modal-footer">
			<button class="btn btn-success" ng-click="onSingin()" ng-disabled="form.$invalid || isUnchanged(user)">Ok</button>
		   	<button class="btn btn-danger cancel" ng-click="close()">Cancel</button>
		</div>
	</div>
</div>
<a class="scroll" href="#">{{'_ScrollL_' | i18n}}</a>